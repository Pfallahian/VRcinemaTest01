<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Curated VR Cinema - Cosmic Edition</title>
  
  <!-- A-Frame 1.6.0 -->
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <!-- Networked A-Frame (NAF) -->
  <script src="https://unpkg.com/networked-aframe@^0.12.0/dist/networked-aframe.min.js"></script>
  
  <!-- Adapters: EasyRTC -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.5.0/socket.io.slim.js"></script>
  <script src="https://unpkg.com/easyrtc@^1.1.0/api/easyrtc.js"></script> 
  <script src="https://unpkg.com/networked-aframe@^0.12.0/dist/adapters/easyrtc.js"></script>

  <!-- A-Frame Extras -->
  <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>

  <script>
    // ----------------------------------------------------------
    // COMPONENT: Star System (Visuals)
    // Generates a procedural star field
    // ----------------------------------------------------------
    AFRAME.registerComponent('star-system', {
      schema: { count: {type: 'number', default: 800}, radius: {type: 'number', default: 50} },
      init: function() {
        for(let i=0; i<this.data.count; i++) {
          const star = document.createElement('a-sphere');
          const theta = Math.random() * 2 * Math.PI;
          const phi = Math.acos(2 * Math.random() - 1);
          const r = this.data.radius * (0.8 + Math.random() * 0.4); 
          
          const x = r * Math.sin(phi) * Math.cos(theta);
          const y = r * Math.sin(phi) * Math.sin(theta);
          const z = r * Math.cos(phi);
          
          star.setAttribute('position', `${x} ${y} ${z}`);
          star.setAttribute('radius', Math.random() * 0.05 + 0.02);
          star.setAttribute('color', Math.random() > 0.8 ? '#aaddff' : '#ffffff');
          star.setAttribute('shader', 'flat');
          this.el.appendChild(star);
        }
      }
    });

    // ----------------------------------------------------------
    // COMPONENT: Headbox Limit (Locomotion Constraint)
    // ----------------------------------------------------------
    AFRAME.registerComponent('headbox-limit', {
      schema: {
        limit: {type: 'number', default: 0.3},
        fadePlane: {type: 'selector'} 
      },
      tick: function () {
        if (!this.data.fadePlane) return;
        const pos = this.el.object3D.position;
        const distance = Math.sqrt(pos.x ** 2 + pos.z ** 2); 
        let opacity = 0;
        if (distance > (this.data.limit * 0.5)) {
             opacity = (distance - (this.data.limit * 0.5)) / (this.data.limit * 0.5);
        }
        opacity = Math.min(Math.max(opacity, 0), 1);
        this.data.fadePlane.setAttribute('material', 'opacity', opacity);
        this.data.fadePlane.setAttribute('visible', opacity > 0.01);
      }
    });

    // ----------------------------------------------------------
    // COMPONENT: UI Manager
    // Handles state flow
    // ----------------------------------------------------------
    AFRAME.registerComponent('ui-manager', {
      init: function() {
        this.welcomeEl = document.querySelector('#ui-welcome');
        this.selectionEl = document.querySelector('#ui-selection');
        this.navBarEl = document.querySelector('#ui-navbar');
        this.hostControlsEl = document.querySelector('#ui-host-controls'); // New Host Controls
        this.lobbySphere = document.querySelector('#lobby-sphere');
        this.cinemaSphere = document.querySelector('#cinema-sphere');
        this.videoEl = document.querySelector('#cinema-video');

        document.querySelector('#btn-ready').addEventListener('click', () => this.gotoSelection());
        
        const movies = document.querySelectorAll('.movie-btn');
        movies.forEach(btn => {
          btn.addEventListener('click', (e) => {
              const target = e.target.closest('.movie-btn');
              const src = target.getAttribute('data-src');
              this.simulateDownload(target, src);
          });
        });

        // Updated Event Listeners for 3 modes
        // pass mode: 'solo', 'guest', 'host'
        document.querySelector('#btn-watch-alone').addEventListener('click', () => this.enterCinema('solo'));
        document.querySelector('#btn-join-party').addEventListener('click', () => this.enterCinema('guest'));
        document.querySelector('#btn-create-party').addEventListener('click', () => this.enterCinema('host'));

        // Host Control Listeners
        document.querySelector('#btn-host-play').addEventListener('click', () => {
            const sync = document.querySelector('[video-sync-controller]').components['video-sync-controller'];
            if(sync) sync.play();
        });
        document.querySelector('#btn-host-pause').addEventListener('click', () => {
            const sync = document.querySelector('[video-sync-controller]').components['video-sync-controller'];
            if(sync) sync.pause();
        });
        document.querySelector('#btn-host-end').addEventListener('click', () => {
            location.reload(); // End party by reloading app
        });
      },

      gotoSelection: function() {
        this.welcomeEl.setAttribute('visible', false);
        this.selectionEl.setAttribute('visible', true);
      },

      simulateDownload: function(clickedBtn, videoSrc) {
        const visualEl = clickedBtn.querySelector('a-plane');
        if (visualEl) visualEl.setAttribute('material', 'color', '#ffff00');
        
        const progress = document.querySelector('#download-bar');
        progress.setAttribute('visible', true);
        
        let p = 0;
        const interval = setInterval(() => {
          p += 0.05;
          progress.setAttribute('scale', `${p} 1 1`);
          if (p >= 1) {
            clearInterval(interval);
            
            if (videoSrc && this.videoEl) {
                this.videoEl.setAttribute('src', videoSrc);
                this.videoEl.load();
            }

            this.unlockNavBar();
            progress.setAttribute('visible', false);
            if (visualEl) visualEl.setAttribute('material', 'color', '#00ff00');
          }
        }, 50);
      },

      unlockNavBar: function() {
        this.selectionEl.setAttribute('visible', false);
        this.navBarEl.setAttribute('visible', true);
      },

      // Unified entry function
      enterCinema: function(mode) {
        // mode: 'solo', 'guest', 'host'
        const enableNetwork = (mode !== 'solo');

        // FIX: Video Playback Logic based on mode
        if (this.videoEl) {
          if (mode === 'host') {
             // Host Mode: Pause initially, wait for manual start
             this.videoEl.pause(); 
             this.videoEl.currentTime = 0;
             console.log("Host Mode initialized. Video paused.");
          } else {
             // Guest/Solo Mode: Attempt autoplay
             this.videoEl.muted = false; 
             this.videoEl.play().then(() => {
                console.log("Video started successfully.");
             }).catch(e => {
                console.warn("Autoplay blocked, retrying muted:", e);
                this.videoEl.muted = true;
                this.videoEl.play();
             });
          }
        }

        // Cosmic Transition
        this.lobbySphere.setAttribute('animation', 'property: material.opacity; to: 0; dur: 2000');
        this.cinemaSphere.setAttribute('visible', true);
        this.cinemaSphere.setAttribute('animation', 'property: material.opacity; to: 1; dur: 2000');
        this.navBarEl.setAttribute('visible', false);
        
        // Show Host Controls if Host mode
        if (mode === 'host') {
            this.hostControlsEl.setAttribute('visible', true);
        }

        document.querySelector('#star-container').setAttribute('visible', false);

        const syncCtrl = document.querySelector('[video-sync-controller]');
        if(syncCtrl) syncCtrl.components['video-sync-controller'].initSync();

        // Only connect if multiplayer was requested
        if (enableNetwork && NAF && NAF.connection && !NAF.connection.isConnected()) {
            try { 
                console.log("Connecting to Multiplayer as " + mode);
                NAF.connection.connect(); 
            } catch (e) {
                console.warn("NAF Connection failed:", e);
            }
        } else {
            console.log("Entering Single Player Mode.");
        }
      }
    });

    // ----------------------------------------------------------
    // COMPONENT: Floor Menu (The Holocron)
    // ----------------------------------------------------------
    AFRAME.registerComponent('floor-menu', {
      init: function() {
        this.menuEl = document.querySelector('#settings-menu');
        this.camera = document.querySelector('#main-camera');
        
        this.el.addEventListener('click', () => {
          this.menuEl.setAttribute('visible', !this.menuEl.getAttribute('visible'));
          this.menuEl.setAttribute('position', `0 1.6 -1.5`); 
          this.menuEl.setAttribute('rotation', `0 0 0`);
        });
        
        document.querySelector('#btn-back-lobby').addEventListener('click', () => location.reload());
        document.querySelector('#btn-toggle-sub').addEventListener('click', function() {
           const sub = document.querySelector('#subtitle-text');
           sub.setAttribute('visible', !sub.getAttribute('visible'));
           this.querySelector('a-text').setAttribute('value', sub.getAttribute('visible') ? "Subs: ON" : "Subs: OFF");
        });
      }
    });

    // ----------------------------------------------------------
    // COMPONENT: Video Sync Controller
    // ----------------------------------------------------------
    AFRAME.registerComponent('video-sync-controller', {
      schema: { src: {type: 'selector'} },
      init: function() {
        this.video = this.data.src;
        this.isOwner = true; 

        document.body.addEventListener('connected', (evt) => {
            this.isOwner = NAF.connection.getConnectedClients().length === 0; 
        });
        
        if (NAF.connection) {
          try {
            NAF.connection.subscribeToDataChannel('video-control', (senderId, dataType, data, targetId) => {
                this.receiveSyncData(data);
            });
          } catch (e) {}
        }
      },
      initSync: function() { setInterval(() => this.broadcastSync(), 1000); },
      play: function() { this.video.play(); this.broadcastSync('play'); },
      pause: function() { this.video.pause(); this.broadcastSync('pause'); },
      broadcastSync: function(action) {
        if(!NAF.connection.isConnected() || !this.isOwner) return;
        const data = { timestamp: this.video.currentTime, paused: this.video.paused, action: action || 'sync' };
        NAF.connection.broadcastDataGuaranteed('video-control', data);
      },
      receiveSyncData: function(data) {
        this.isOwner = false; 
        if (Math.abs(this.video.currentTime - data.timestamp) > 0.5) { this.video.currentTime = data.timestamp; }
        if (data.paused && !this.video.paused) { this.video.pause(); } 
        else if (!data.paused && this.video.paused) { this.video.play(); }
      }
    });
    
    AFRAME.registerSystem('naf-setup', { init: function() {} });
  </script>
  
  <script>
      window.addEventListener('load', () => {
        if (NAF.schemas) {
            NAF.schemas.add({
                template: '#avatar-template',
                components: ['position', 'rotation']
            });
        }
      });
  </script>
</head>
<body>

  <!-- SCENE SETUP -->
  <a-scene 
    renderer="foveationLevel: 3; highRefreshRate: true; colorManagement: true;"
    background="color: #050011"
    fog="type: linear; color: #1a002b; near: 10; far: 60"
    networked-scene="room: curated-vr-cinema; debug: true; adapter: easyrtc; audio: false; connectOnLoad: false;"
    ui-manager
  >

    <!-- COSMIC ASSETS -->
    <a-assets>
      <a-mixin id="btn" 
               geometry="primitive: plane; width: 0.8; height: 0.3" 
               material="shader: standard; color: #220044; metalness: 0.8; roughness: 0.2; opacity: 0.8; side: double"
               text="color: #00ffff; align: center; width: 3; font: kelsonsans"
               animation__hover="property: material.emissive; to: #440088; startEvents: mouseenter; dur: 200"
               animation__leave="property: material.emissive; to: #000000; startEvents: mouseleave; dur: 200"
               animation__click="property: scale; to: 0.95 0.95 1; startEvents: click; dir: alternate; dur: 100; loop: 1"></a-mixin>
      
      <template id="avatar-template">
        <a-entity class="avatar">
          <a-sphere color="#eeeeee" scale="0.28 0.28 0.28" material="metalness: 0.5; roughness: 0.5"></a-sphere>
          <a-sphere color="#d4af37" scale="0.25 0.25 0.25" position="0 0.02 -0.1" material="metalness: 1; roughness: 0; color: gold"></a-sphere>
          <a-cylinder color="#888" height="0.2" radius="0.01" position="0.2 0.2 0"></a-cylinder>
        </a-entity>
      </template>

      <video id="cinema-video" 
             src="https://cdn.com/content/assets/playhouse-vr/progressive.mp4" 
             crossorigin="anonymous" playsinline webkit-playsinline muted></video>
    </a-assets>

    <!-- ENVIRONMENT -->
    <a-entity id="star-container" star-system="count: 800; radius: 60"></a-entity>
    
    <a-light type="ambient" color="#222"></a-light>
    <a-light type="point" color="#aa00ff" position="0 5 0" intensity="0.8" distance="20"></a-light>
    <a-light type="point" color="#00ffff" position="0 1 2" intensity="0.5" distance="5"></a-light>

    <a-sphere id="lobby-sphere" radius="20" 
           material="shader: standard; color: #202040; side: back; transparent: true; opacity: 0.3; wireframe: true">
    </a-sphere>

    <a-videosphere id="cinema-sphere" src="#cinema-video" radius="40" rotation="0 -90 0" 
                   material="transparent: true; opacity: 0; side: back" visible="false"></a-videosphere>

    <!-- CAMERA RIG -->
    <a-entity id="rig" position="0 0 0" networked="template:#avatar-template; attachTemplateToLocal:false;">
      <a-entity id="main-camera" camera position="0 1.6 0" look-controls wasd-controls 
                headbox-limit="fadePlane: #blackout-plane; limit: 0.3">
        <a-entity cursor="fuse: false;" position="0 0 -1"
                  geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                  material="color: #00ffff; shader: flat; opacity: 0.8"
                  raycaster="objects: .clickable">
        </a-entity>
        <a-plane id="blackout-plane" position="0 0 -0.1" width="2" height="2" 
                 material="color: black; shader: flat; transparent: true; opacity: 0; depthTest: false" visible="false"></a-plane>
        <a-text id="subtitle-text" value="" position="0 -0.5 -1" align="center" width="1.5" color="#00ffff" visible="false"></a-text>
      </a-entity>
      <a-entity oculus-touch-controls="hand: left" raycaster="objects: .clickable; showLine: true" line="color: #aa00ff"></a-entity>
      <a-entity oculus-touch-controls="hand: right" raycaster="objects: .clickable; showLine: true" line="color: #aa00ff"></a-entity>
    </a-entity>

    <!-- UI MANAGER SYSTEMS -->
    <a-entity id="ui-group" position="0 1.6 -1.5">
      
      <!-- STATE: WELCOME -->
      <a-entity id="ui-welcome" visible="true">
        <a-plane width="2.1" height="1.1" color="#00ffff" material="shader: flat; opacity: 0.2" position="0 0 -0.01"></a-plane>
        <a-plane width="2" height="1" material="shader: standard; color: #000; opacity: 0.8; metalness: 0.9; roughness: 0.1">
           <a-text value="C O S M I C   C I N E M A" align="center" position="0 0.2 0" width="5" color="#ff00ff" font="kelsonsans"></a-text>
           <a-entity id="btn-ready" mixin="btn" position="0 -0.2 0.01" class="clickable">
             <a-text value="INITIALIZE" align="center" position="0 0 0.01" color="#00ffff" font="kelsonsans"></a-text>
           </a-entity>
        </a-plane>
      </a-entity>

      <!-- STATE: SELECTION -->
      <a-entity id="ui-selection" visible="false">
        <a-plane width="3.2" height="1.8" material="shader: standard; color: #050011; opacity: 0.9; metalness: 0.5">
            <a-text value="Select a Video" align="center" position="0 0.7 0" width="4" color="#00ffff" font="kelsonsans"></a-text>
            
            <a-entity class="movie-btn" data-src="https://cdn.bitmovin.com/content/assets/playhouse-vr/progressive.mp4" position="-1 0.2 0.01">
                 <a-plane class="clickable" width="0.6" height="0.4" color="#330033" material="shader: standard; emissive: #110011"></a-plane>
                 <a-text value="Buck Bunny" align="center" position="0 0 0.02" width="2" color="#fff"></a-text>
                 <a-ring radius-inner="0.35" radius-outer="0.36" color="#ff00ff"></a-ring>
            </a-entity>
            
            <a-entity class="movie-btn" data-src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4" position="0 0.2 0.01">
                 <a-plane class="clickable" width="0.6" height="0.4" color="#330033" material="shader: standard; emissive: #110011"></a-plane>
                 <a-text value="Elephant Dream" align="center" position="0 0 0.02" width="2" color="#fff"></a-text>
                 <a-ring radius-inner="0.35" radius-outer="0.36" color="#00ffff"></a-ring>
            </a-entity>

            <a-entity class="movie-btn" data-src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4" position="1 0.2 0.01">
                 <a-plane class="clickable" width="0.6" height="0.4" color="#330033" material="shader: standard; emissive: #110011"></a-plane>
                 <a-text value="Blazes" align="center" position="0 0 0.02" width="2" color="#fff"></a-text>
                 <a-ring radius-inner="0.35" radius-outer="0.36" color="#ffff00"></a-ring>
            </a-entity>

            <a-entity class="movie-btn" data-src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4" position="-0.5 -0.4 0.01">
                 <a-plane class="clickable" width="0.6" height="0.4" color="#330033" material="shader: standard; emissive: #110011"></a-plane>
                 <a-text value="Escapes" align="center" position="0 0 0.02" width="2" color="#fff"></a-text>
                 <a-ring radius-inner="0.35" radius-outer="0.36" color="#00ff00"></a-ring>
            </a-entity>

            <a-box id="download-bar" visible="false" position="0 -0.7 0.05" width="2" height="0.05" depth="0.01" color="#00ffff" scale="0 1 1" align="left" material="emissive: #00ffff; emissiveIntensity: 2"></a-box>
        </a-plane>
      </a-entity>

      <!-- STATE: NAV BAR -->
      <a-entity id="ui-navbar" visible="false">
        <a-plane width="4" height="0.5" material="shader: standard; color: #111; opacity: 0.9; metalness: 0.8">
             <a-text value="Ready to Launch" align="center" position="0 0.15 0" width="3" color="#aaa" font="kelsonsans"></a-text>
             
             <!-- Left: Create -->
             <a-entity id="btn-create-party" mixin="btn" scale="0.8 0.8 1" position="-1.2 -0.1 0.01" class="clickable">
               <a-text value="Create Room" align="center" position="0 0 0.01" color="#00ffff"></a-text>
             </a-entity>

             <!-- Center: Watch Alone -->
             <a-entity id="btn-watch-alone" mixin="btn" scale="0.8 0.8 1" position="0 -0.1 0.01" class="clickable">
               <a-text value="Watch Alone" align="center" position="0 0 0.01" color="#ffffff"></a-text>
             </a-entity>

             <!-- Right: Join -->
             <a-entity id="btn-join-party" mixin="btn" scale="0.8 0.8 1" position="1.2 -0.1 0.01" class="clickable">
               <a-text value="Join / Warp" align="center" position="0 0 0.01" color="#ff00ff"></a-text>
             </a-entity>
        </a-plane>
      </a-entity>

      <!-- STATE: HOST CONTROLS (New) -->
      <!-- Positioned lower and closer for easier access while watching -->
      <a-entity id="ui-host-controls" visible="false" position="0 -0.5 0.5" rotation="-20 0 0">
        <a-plane width="1.5" height="0.4" material="shader: standard; color: #000; opacity: 0.8; metalness: 0.9; side: double">
            <a-text value="HOST CONTROLS" align="center" position="0 0.15 0" width="2" color="#ff00ff" font="kelsonsans"></a-text>
            
            <!-- Play -->
            <a-entity id="btn-host-play" mixin="btn" scale="0.4 0.4 1" position="-0.5 -0.05 0.01" class="clickable">
                <a-text value="PLAY" align="center" position="0 0 0.01" color="#00ff00"></a-text>
            </a-entity>

            <!-- Pause -->
            <a-entity id="btn-host-pause" mixin="btn" scale="0.4 0.4 1" position="0 -0.05 0.01" class="clickable">
                <a-text value="PAUSE" align="center" position="0 0 0.01" color="#ffff00"></a-text>
            </a-entity>

            <!-- End -->
            <a-entity id="btn-host-end" mixin="btn" scale="0.4 0.4 1" position="0.5 -0.05 0.01" class="clickable">
                <a-text value="END" align="center" position="0 0 0.01" color="#ff0000"></a-text>
            </a-entity>
        </a-plane>
      </a-entity>

    </a-entity>

    <!-- FLOOR MENU -->
    <a-entity floor-menu position="0 0.2 0">
        <a-entity animation="property: rotation; to: 0 360 0; loop: true; dur: 10000">
             <a-dodecahedron class="clickable" radius="0.15" color="#00ffff" 
                             material="wireframe: true; emissive: #00ffff; emissiveIntensity: 0.5">
             </a-dodecahedron>
        </a-entity>
        <a-octahedron radius="0.08" color="#ff00ff" material="emissive: #ff00ff; emissiveIntensity: 1"
                      animation="property: scale; to: 1.2 1.2 1.2; dir: alternate; loop: true; dur: 1000"></a-octahedron>
        <a-text value="SYSTEMS" align="center" position="0 0.3 0" rotation="-90 0 0" width="2" color="#00ffff"></a-text>
    </a-entity>

    <!-- SETTINGS MENU -->
    <a-entity id="settings-menu" visible="false" position="0 -10 0">
         <a-plane width="1.5" height="1" material="shader: standard; color: #110022; opacity: 0.9; metalness: 0.8; side: double" class="clickable">
             <a-plane width="1.55" height="1.05" position="0 0 -0.01" color="#ff00ff" material="shader: flat; opacity: 0.3"></a-plane>
             <a-text value="System Config" align="center" position="0 0.4 0" color="#fff" font="kelsonsans"></a-text>
             <a-entity id="btn-toggle-sub" mixin="btn" position="0 0.1 0.01" class="clickable">
                <a-text value="Subs: OFF" align="center" position="0 0 0.01" color="#00ffff"></a-text>
             </a-entity>
             <a-entity id="btn-back-lobby" mixin="btn" position="0 -0.3 0.01" class="clickable">
                <a-text value="Reboot" align="center" position="0 0 0.01" color="#ff0000"></a-text>
             </a-entity>
         </a-plane>
    </a-entity>

    <!-- SYSTEM LOGIC CONTROLLER -->
    <a-entity video-sync-controller="src: #cinema-video"></a-entity>

    <!-- FURNITURE: Cosmic Lounge Chairs -->
    <a-entity position="-1.6 0 0.5" rotation="0 0 0">
       <a-box width="0.6" height="0.15" depth="0.6" color="#1a0b2e" material="metalness: 0.8; roughness: 0.3"></a-box>
       <a-box width="0.6" height="0.7" depth="0.1" position="0 0.4 0.25" rotation="-15 0 0" color="#1a0b2e" material="metalness: 0.8"></a-box>
       <a-cylinder radius="0.01" height="0.6" position="0.3 0.05 0" rotation="90 0 0" color="#00ffff" material="emissive: #00ffff; emissiveIntensity: 0.8"></a-cylinder>
       <a-cylinder radius="0.01" height="0.6" position="-0.3 0.05 0" rotation="90 0 0" color="#00ffff" material="emissive: #00ffff; emissiveIntensity: 0.8"></a-cylinder>
       <a-box width="0.05" height="0.3" depth="0.6" position="0.325 0.2 0" color="#220044"></a-box>
       <a-box width="0.05" height="0.3" depth="0.6" position="-0.325 0.2 0" color="#220044"></a-box>
    </a-entity>

    <a-entity position="-0.55 0 0.5" rotation="0 -5 0">
       <a-box width="0.6" height="0.15" depth="0.6" color="#1a0b2e" material="metalness: 0.8; roughness: 0.3"></a-box>
       <a-box width="0.6" height="0.7" depth="0.1" position="0 0.4 0.25" rotation="-15 0 0" color="#1a0b2e" material="metalness: 0.8"></a-box>
       <a-cylinder radius="0.01" height="0.6" position="0.3 0.05 0" rotation="90 0 0" color="#00ffff" material="emissive: #00ffff; emissiveIntensity: 0.8"></a-cylinder>
       <a-cylinder radius="0.01" height="0.6" position="-0.3 0.05 0" rotation="90 0 0" color="#00ffff" material="emissive: #00ffff; emissiveIntensity: 0.8"></a-cylinder>
       <a-box width="0.05" height="0.3" depth="0.6" position="0.325 0.2 0" color="#220044"></a-box>
       <a-box width="0.05" height="0.3" depth="0.6" position="-0.325 0.2 0" color="#220044"></a-box>
    </a-entity>

    <a-entity position="0.55 0 0.5" rotation="0 5 0">
       <a-box width="0.6" height="0.15" depth="0.6" color="#1a0b2e" material="metalness: 0.8; roughness: 0.3"></a-box>
       <a-box width="0.6" height="0.7" depth="0.1" position="0 0.4 0.25" rotation="-15 0 0" color="#1a0b2e" material="metalness: 0.8"></a-box>
       <a-cylinder radius="0.01" height="0.6" position="0.3 0.05 0" rotation="90 0 0" color="#00ffff" material="emissive: #00ffff; emissiveIntensity: 0.8"></a-cylinder>
       <a-cylinder radius="0.01" height="0.6" position="-0.3 0.05 0" rotation="90 0 0" color="#00ffff" material="emissive: #00ffff; emissiveIntensity: 0.8"></a-cylinder>
       <a-box width="0.05" height="0.3" depth="0.6" position="0.325 0.2 0" color="#220044"></a-box>
       <a-box width="0.05" height="0.3" depth="0.6" position="-0.325 0.2 0" color="#220044"></a-box>
    </a-entity>

    <a-entity position="1.6 0 0.5" rotation="0 0 0">
       <a-box width="0.6" height="0.15" depth="0.6" color="#1a0b2e" material="metalness: 0.8; roughness: 0.3"></a-box>
       <a-box width="0.6" height="0.7" depth="0.1" position="0 0.4 0.25" rotation="-15 0 0" color="#1a0b2e" material="metalness: 0.8"></a-box>
       <a-cylinder radius="0.01" height="0.6" position="0.3 0.05 0" rotation="90 0 0" color="#00ffff" material="emissive: #00ffff; emissiveIntensity: 0.8"></a-cylinder>
       <a-cylinder radius="0.01" height="0.6" position="-0.3 0.05 0" rotation="90 0 0" color="#00ffff" material="emissive: #00ffff; emissiveIntensity: 0.8"></a-cylinder>
       <a-box width="0.05" height="0.3" depth="0.6" position="0.325 0.2 0" color="#220044"></a-box>
       <a-box width="0.05" height="0.3" depth="0.6" position="-0.325 0.2 0" color="#220044"></a-box>
    </a-entity>

  </a-scene>
</body>
</html>